title: API
---
本ドキュメントでは API についてと Hexo のソースコードを修正したり新たにプラグインを作成したりする人に特に有用な詳しい情報を提供しています。Hexo のより基本的な利用に関しては [ドキュメント](../docs) を参照して下さい。

本ドキュメントは Hexo 3 以上に対してのみ有効です。

## 初期化

最初に、 Hexo のインスタンスを作成しなければなりません。新たに作成するインスタンスは 2 つの引数を受け取ります: ウェブサイトのルートディレクトリである `base_dir` と、初期化時のオプションを格納したオブジェクトです。次に、インスタンス上に定義された `init` メソッドを呼び出す事で Hexo が設定とプラグインを読み出させ、初期化が行われます。

``` js
var Hexo = require('hexo');
var hexo = new Hexo(process.cwd(), {});

hexo.init().then(function(){
  // ...
});
```

オプション | 説明 | デフォルト値
--- | --- | ---
`debug` | デバッグモードを有効化します。ターミナル上にデバッグ用メッセージを出力してルートディレクトリ内に `debug.log` を保存します。 | `false`
`safe` | セーフモードを有効化します。あらゆるプラグインを読み込みません。 | `false`
`silent` | サイレントモードを有効化します。ターミナル上にあらゆるメッセージを表示させません。 | `false`
`config` | 設定ファイルのパスを指定します。 | `_config.yml`

## ファイルの読み込み

Hexo はファイルの読み込みに対して 2 つの方法を提供しています: `load` と `watch` です。 `load` はテーマのデータと同様に `source` フォルダ内の全てのファイルを読み込みます。 `watch` は `load` 同様の動作をしますが、継続的にファイルの変更を監視します。

いずれの方法もファイルの一覧を取得して対応するプロセッサー( Processor )に渡します。処理が完了すると、経路作成のためジェネレータ( Generator )が呼び出されます。

``` js
hexo.load().then(function(){
  // ...
});

hexo.watch().then(function(){
  // 監視を止めるために hexo.unwatch() を呼び出せます。
});
```

## コマンドの実行

Hexo インスタンス上で `call` メソッドを呼び出すことであらゆるコンソール( Console )コマンドを明示的に呼び出すことができます。そういった呼び出しの場合 2 つの引数を受け取ります: コンソールコマンドの名称と、オプション引数です。異なるコンソールコマンドに応じて異なったオプションを利用可能です。

``` js
hexo.call('generate', {}).then(function(){
  // ...
});
```

## 終了

あるコンソールコマンドが成功もしくは失敗して終了した場合は `exit` メソッドを呼び出すべきです。この呼び出しによって Hexo は安全に終了してデータベースに対する保存処理といった重要な処理を完了させる事ができます。

``` js
hexo.call('generate').then(function(){
  return hexo.exit();
}).catch(function(err){
  return hexo.exit(err);
});
```
